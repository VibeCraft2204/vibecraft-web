---
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map((project) => ({
    params: { slug: project.id.replace(/^(consulting|development)\//, '').replace(/\.md$/, '') },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await render(project);

const categoryLabels = {
  consulting: '컨설팅',
  development: '개발 외주'
};

const subcategoryLabels = {
  'digital-transform': '디지털 전환',
  'ai-marketing': 'AI 마케팅',
  'vibe-refactor': '바이브코딩',
  'outsourcing': '일반 외주'
};

const statusLabels = {
  'completed': '완료',
  'in-progress': '진행중',
  'planned': '예정'
};
---

<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{project.data.title} | VibeCraft</title>
  <meta name="description" content={project.data.summary}>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css" />
</head>
<body>
  <header class="header" id="header">
    <div class="container">
      <div class="header-inner">
        <a href="/vibecraft-web/" class="logo"><div class="logo-icon">V</div><span>VibeCraft</span></a>
        <nav class="nav-desktop">
          <a href="/vibecraft-web/" class="nav-link">홈</a>
          <a href="/vibecraft-web/#services" class="nav-link">서비스</a>
          <a href="/vibecraft-web/#contact" class="nav-link">소개</a>
          <div class="nav-dropdown">
            <button class="nav-link nav-dropdown-trigger active">프로젝트 <span class="dropdown-arrow">▾</span></button>
            <div class="nav-dropdown-menu">
              <a href="/vibecraft-web/projects" class="dropdown-item">전체 보기</a>
              <a href="/vibecraft-web/projects?category=consulting" class="dropdown-item">컨설팅</a>
              <a href="/vibecraft-web/projects?category=development" class="dropdown-item">개발 외주</a>
            </div>
          </div>
        </nav>
        <div class="header-actions">
          <a href="https://docs.google.com/forms/d/e/1FAIpQLScPYEgY-bhxM31JWZsoHIaNdFGE-Dy3HJjn41500A0O7IeeOQ/viewform" target="_blank" rel="noopener" class="btn-contact">상담 신청 →</a>
          <button class="menu-toggle" aria-label="메뉴 열기">☰</button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <article class="project-detail">
      <div class="container">
        <div class="breadcrumb">
          <a href="/vibecraft-web/projects">프로젝트</a>
          <span>/</span>
          <span>{categoryLabels[project.data.category]}</span>
        </div>

        <header class="project-header">
          <div class="project-badges">
            <span class="badge badge-category">{categoryLabels[project.data.category]}</span>
            <span class="badge badge-subcategory">{subcategoryLabels[project.data.subcategory]}</span>
            <span class="badge badge-status" data-status={project.data.status}>{statusLabels[project.data.status]}</span>
          </div>
          <h1 class="project-title">{project.data.title}</h1>
          <p class="project-summary">{project.data.summary}</p>
        </header>

        <div class="project-meta-grid">
          <div class="meta-card">
            <span class="meta-label">클라이언트</span>
            <span class="meta-value">{project.data.client}</span>
          </div>
          <div class="meta-card">
            <span class="meta-label">기간</span>
            <span class="meta-value">{project.data.period}</span>
          </div>
          {project.data.metrics && project.data.metrics.map((metric) => (
            <div class="meta-card meta-card-highlight">
              <span class="meta-label">{metric.label}</span>
              <span class="meta-value meta-value-highlight">{metric.value}</span>
            </div>
          ))}
        </div>

        {project.data.techStack && project.data.techStack.length > 0 && (
          <div class="tech-stack">
            <h3 class="tech-title">기술 스택</h3>
            <div class="tech-list">
              {project.data.techStack.map((tech) => (
                <span class="tech-badge">{tech}</span>
              ))}
            </div>
          </div>
        )}

        <div class="project-tags-section">
          <div class="tags-list">
            {project.data.tags.map((tag) => (
              <span class="tag">{tag}</span>
            ))}
          </div>
        </div>

        <div class="project-content">
          <Content />
        </div>

        <div class="project-footer">
          <a href="/vibecraft-web/projects" class="btn btn-secondary">← 목록으로</a>
          <a href="https://docs.google.com/forms/d/e/1FAIpQLScPYEgY-bhxM31JWZsoHIaNdFGE-Dy3HJjn41500A0O7IeeOQ/viewform" target="_blank" rel="noopener" class="btn btn-primary">프로젝트 문의 →</a>
        </div>
      </div>
    </article>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-inner">
        <a href="/vibecraft-web/" class="footer-logo"><div class="logo-icon">V</div><span>VibeCraft</span></a>
        <p class="footer-copyright">© 2026 VibeCraft. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    const header = document.getElementById('header');
    window.addEventListener('scroll', () => {
      header?.classList.toggle('scrolled', window.pageYOffset > 50);
    });
  </script>
</body>
</html>

<style is:global>
:root{--bg-primary:#0C0A0F;--bg-secondary:rgba(25,20,30,0.6);--bg-card:rgba(30,25,35,0.7);--text-primary:#F8F7FA;--text-secondary:#B8B5C0;--text-muted:#78758A;--brand-primary:#FF6B4A;--brand-secondary:#FF8F6B;--brand-light:rgba(255,107,74,0.15);--accent-mint:#4ECDC4;--accent-mint-light:#7EDDD6;--accent-purple:#A855F7;--accent-purple-light:#C084FC;--accent-gold:#F59E0B;--border-default:#2D2A35;--border-subtle:rgba(255,255,255,0.06);--container-max:900px;--section-padding:clamp(4rem,8vw,8rem);--radius-sm:8px;--radius-md:12px;--radius-lg:20px;--radius-xl:28px;--radius-full:9999px;--transition-fast:0.15s cubic-bezier(0.4,0,0.2,1);--transition-normal:0.25s cubic-bezier(0.4,0,0.2,1);--transition-slow:0.4s cubic-bezier(0.4,0,0.2,1)}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:"Pretendard Variable",Pretendard,-apple-system,BlinkMacSystemFont,system-ui,sans-serif;background-color:var(--bg-primary);color:var(--text-primary);line-height:1.6;-webkit-font-smoothing:antialiased;overflow-x:hidden}
a{color:inherit;text-decoration:none}
ul,ol{list-style:none}
.container{max-width:var(--container-max);margin:0 auto;padding:0 1.25rem}
@media(min-width:640px){.container{padding:0 1.5rem}}
.header{position:fixed;top:0;left:0;right:0;z-index:100;transition:var(--transition-slow);background:rgba(12,10,15,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border-subtle)}
.header.scrolled{background:rgba(12,10,15,0.95)}
.header-inner{display:flex;align-items:center;justify-content:space-between;height:72px}
.logo{display:flex;align-items:center;gap:0.75rem;font-weight:700;font-size:1.25rem;transition:var(--transition-fast)}
.logo:hover{opacity:0.8}
.logo-icon{width:40px;height:40px;border-radius:var(--radius-md);background:linear-gradient(135deg,var(--brand-primary),var(--accent-gold));display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1.1rem;color:white}
.nav-desktop{display:none;align-items:center;gap:0.5rem}
@media(min-width:1024px){.nav-desktop{display:flex}}
.nav-link{padding:0.5rem 1rem;border-radius:var(--radius-md);font-size:0.9rem;font-weight:500;color:var(--text-secondary);transition:var(--transition-fast);cursor:pointer;background:transparent;border:none}
.nav-link:hover,.nav-link.active{color:var(--text-primary);background:rgba(255,255,255,0.05)}
.nav-link.active{color:var(--brand-primary)}
.nav-dropdown{position:relative}
.nav-dropdown-trigger{display:flex;align-items:center;gap:0.25rem}
.dropdown-arrow{font-size:0.7rem;transition:var(--transition-fast)}
.nav-dropdown:hover .dropdown-arrow{transform:rotate(180deg)}
.nav-dropdown-menu{position:absolute;top:100%;right:0;min-width:160px;padding:0.5rem;background:rgba(20,16,24,0.95);backdrop-filter:blur(20px);border:1px solid var(--border-subtle);border-radius:var(--radius-md);opacity:0;visibility:hidden;transform:translateY(8px);transition:var(--transition-fast);z-index:200}
.nav-dropdown:hover .nav-dropdown-menu{opacity:1;visibility:visible;transform:translateY(4px)}
.dropdown-item{display:block;padding:0.625rem 1rem;border-radius:var(--radius-sm);font-size:0.875rem;color:var(--text-secondary);transition:var(--transition-fast)}
.dropdown-item:hover{color:var(--text-primary);background:rgba(255,255,255,0.05)}
.header-actions{display:flex;align-items:center;gap:0.75rem}
.btn-contact{display:none;padding:0.625rem 1.25rem;background:linear-gradient(135deg,var(--brand-primary),var(--brand-secondary));border-radius:var(--radius-md);font-size:0.875rem;font-weight:600;color:white;transition:var(--transition-fast)}
.btn-contact:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(255,107,74,0.3)}
@media(min-width:1024px){.btn-contact{display:inline-flex;align-items:center;gap:0.5rem}}
.menu-toggle{display:flex;align-items:center;justify-content:center;width:44px;height:44px;border-radius:var(--radius-md);background:transparent;border:1px solid var(--border-subtle);color:var(--text-primary);cursor:pointer;transition:var(--transition-fast)}
.menu-toggle:hover{background:rgba(255,255,255,0.05)}
@media(min-width:1024px){.menu-toggle{display:none}}

/* Project Detail */
.project-detail{padding:8rem 0 4rem}
.breadcrumb{display:flex;gap:0.5rem;font-size:0.875rem;color:var(--text-muted);margin-bottom:2rem}
.breadcrumb a{color:var(--text-secondary);transition:var(--transition-fast)}
.breadcrumb a:hover{color:var(--brand-primary)}

.project-header{margin-bottom:2.5rem}
.project-badges{display:flex;flex-wrap:wrap;gap:0.5rem;margin-bottom:1.25rem}
.badge{padding:0.375rem 0.875rem;border-radius:var(--radius-full);font-size:0.75rem;font-weight:500}
.badge-category{background:rgba(255,107,74,0.1);border:1px solid rgba(255,107,74,0.2);color:var(--brand-primary)}
.badge-subcategory{background:rgba(78,205,196,0.1);border:1px solid rgba(78,205,196,0.2);color:var(--accent-mint)}
.badge-status{background:rgba(255,255,255,0.05);border:1px solid var(--border-subtle);color:var(--text-muted)}
.badge-status[data-status="completed"]{background:rgba(78,205,196,0.1);border-color:rgba(78,205,196,0.2);color:var(--accent-mint)}
.badge-status[data-status="in-progress"]{background:rgba(245,158,11,0.1);border-color:rgba(245,158,11,0.2);color:var(--accent-gold)}

.project-title{font-size:clamp(2rem,4vw,2.75rem);font-weight:700;margin-bottom:1rem;line-height:1.2}
.project-summary{font-size:1.125rem;color:var(--text-secondary);line-height:1.7}

/* Meta Grid */
.project-meta-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-bottom:2rem}
.meta-card{padding:1.25rem;background:var(--bg-card);border:1px solid var(--border-subtle);border-radius:var(--radius-lg);text-align:center}
.meta-card-highlight{background:linear-gradient(135deg,rgba(255,107,74,0.08),rgba(255,143,107,0.04));border-color:rgba(255,107,74,0.15)}
.meta-label{display:block;font-size:0.75rem;color:var(--text-muted);margin-bottom:0.5rem;text-transform:uppercase;letter-spacing:0.05em}
.meta-value{display:block;font-size:1.1rem;font-weight:600}
.meta-value-highlight{color:var(--brand-primary);font-size:1.5rem;font-weight:700}

/* Tech Stack */
.tech-stack{margin-bottom:2rem;padding:1.25rem;background:var(--bg-card);border:1px solid var(--border-subtle);border-radius:var(--radius-lg)}
.tech-title{font-size:0.875rem;color:var(--text-muted);margin-bottom:0.75rem;text-transform:uppercase;letter-spacing:0.05em}
.tech-list{display:flex;flex-wrap:wrap;gap:0.5rem}
.tech-badge{padding:0.5rem 1rem;background:rgba(168,85,247,0.1);border:1px solid rgba(168,85,247,0.2);border-radius:var(--radius-md);font-size:0.875rem;font-weight:500;color:var(--accent-purple)}

/* Tags */
.project-tags-section{margin-bottom:2.5rem}
.tags-list{display:flex;flex-wrap:wrap;gap:0.5rem}
.tag{padding:0.5rem 1rem;background:rgba(255,255,255,0.05);border-radius:var(--radius-full);font-size:0.875rem;color:var(--text-secondary)}

/* Content */
.project-content{padding:2.5rem 0;border-top:1px solid var(--border-subtle);border-bottom:1px solid var(--border-subtle);margin-bottom:2.5rem}
.project-content h2{font-size:1.5rem;font-weight:700;margin:2rem 0 1rem;color:var(--text-primary)}
.project-content h3{font-size:1.25rem;font-weight:600;margin:1.5rem 0 0.75rem;color:var(--text-primary)}
.project-content p{font-size:1rem;line-height:1.8;color:var(--text-secondary);margin-bottom:1rem}
.project-content ul,.project-content ol{margin:1rem 0;padding-left:1.5rem}
.project-content li{margin-bottom:0.5rem;color:var(--text-secondary)}
.project-content ul li{list-style:disc}
.project-content ol li{list-style:decimal}
.project-content strong{color:var(--text-primary);font-weight:600}
.project-content blockquote{margin:1.5rem 0;padding:1.25rem 1.5rem;background:linear-gradient(135deg,rgba(255,107,74,0.05),rgba(168,85,247,0.03));border-left:3px solid var(--brand-primary);border-radius:0 var(--radius-md) var(--radius-md) 0;font-style:italic;color:var(--text-secondary)}
.project-content blockquote p{margin:0}
.project-content table{width:100%;border-collapse:collapse;margin:1.5rem 0}
.project-content th,.project-content td{padding:0.75rem 1rem;text-align:left;border-bottom:1px solid var(--border-subtle)}
.project-content th{font-weight:600;color:var(--text-primary);background:var(--bg-secondary)}
.project-content td{color:var(--text-secondary)}
.project-content code{padding:0.2rem 0.4rem;background:var(--bg-secondary);border-radius:var(--radius-sm);font-size:0.875rem;font-family:monospace;color:var(--accent-mint)}
.project-content pre{margin:1.5rem 0;padding:1.25rem;background:var(--bg-secondary);border:1px solid var(--border-subtle);border-radius:var(--radius-lg);overflow-x:auto}
.project-content pre code{padding:0;background:transparent}

/* Footer */
.project-footer{display:flex;flex-direction:column;gap:1rem}
@media(min-width:640px){.project-footer{flex-direction:row;justify-content:space-between}}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:1rem 1.75rem;border-radius:var(--radius-md);font-size:1rem;font-weight:600;transition:var(--transition-fast);cursor:pointer;border:none}
.btn-primary{background:linear-gradient(135deg,var(--brand-primary),var(--brand-secondary));color:white}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 12px 32px rgba(255,107,74,0.35)}
.btn-secondary{background:var(--bg-secondary);border:1px solid var(--border-subtle);color:var(--text-secondary)}
.btn-secondary:hover{background:rgba(255,255,255,0.05);color:var(--text-primary)}

/* Site Footer */
.footer{padding:2rem 0;border-top:1px solid var(--border-subtle)}
.footer-inner{display:flex;flex-direction:column;gap:1rem;align-items:center}
@media(min-width:768px){.footer-inner{flex-direction:row;justify-content:space-between}}
.footer-logo{display:flex;align-items:center;gap:0.5rem;font-weight:600;font-size:1rem}
.footer-copyright{font-size:0.85rem;color:var(--text-muted)}
</style>
